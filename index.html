<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø­Ø§Ø³Ø¨Ù‡â€ŒÚ¯Ø± Ù‡Ø¯Ø§ÛŒØª ØªØ­ØµÛŒÙ„ÛŒ</title>
    <meta name="theme-color" content="#2196f3">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ“š</text></svg>">
    
    <!-- Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† ÙÙˆÙ†Øª Vazirmatn -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css">
    
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: Vazirmatn, Tahoma, sans-serif;
            font-size: 16px;
        }

        :root {
            --primary-color: #2196f3;
            --primary-light: #e3f2fd;
            --secondary-color: #ff9800;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --danger-color: #f44336;
            --light-color: #f5f7fa;
            --dark-color: #2c3e50;
            --text-color: #333;
            --border-radius: 12px;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --box-shadow-hover: 0 6px 16px rgba(0, 0, 0, 0.15);
            --transition: all 0.3s ease;
        }

        body {
            background: linear-gradient(135deg, #e3f2fd 0%, #f5f7fa 100%);
            color: var(--text-color);
            line-height: 1.6;
            padding: 16px;
            min-height: 100vh;
            font-family: Vazirmatn, Tahoma, sans-serif;
            -webkit-tap-highlight-color: transparent;
            padding-bottom: 80px;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
            padding: 18px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.8rem;
            font-weight: 700;
            font-family: Vazirmatn, Tahoma, sans-serif;
        }

        .card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px;
            margin-bottom: 20px;
            transition: var(--transition);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .card-header h3 {
            color: var(--primary-color);
            font-size: 1.3rem;
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„ ÙØ±Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² */
        .student-info-form {
            background: linear-gradient(135deg, #f5f7fa 0%, #e3f2fd 100%);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
            border: 2px solid var(--primary-color);
        }

        .student-info-form h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.3rem;
            border-bottom: 2px solid var(--primary-light);
            padding-bottom: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-weight: bold;
            color: var(--dark-color);
            font-size: 0.95rem;
        }

        .form-group input {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
            font-family: Vazirmatn, Tahoma, sans-serif;
        }

        .form-group input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        .form-hint {
            font-size: 0.85rem;
            color: #666;
            margin-top: 4px;
        }

        .table-container {
            overflow-x: auto;
            margin: 20px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
        }

        th, td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background: var(--primary-color);
            color: white;
            font-weight: bold;
        }

        tr:nth-child(even) {
            background: #f9f9f9;
        }

        tr:hover {
            background: #f0f7ff;
        }

        input[type="number"] {
            width: 80px;
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            text-align: center;
            transition: var(--transition);
        }

        input[type="number"]:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        .literature-group {
            background-color: #e8f5e9;
            padding: 10px;
            border-radius: 8px;
            margin: 5px 0;
        }

        .literature-group label {
            display: inline-block;
            margin: 0 10px;
            font-size: 0.9rem;
        }

        .literature-group input {
            width: 60px;
            margin: 0 5px;
        }

        .btn {
            background: linear-gradient(to right, var(--primary-color), #21cbf3);
            color: white;
            border: none;
            padding: 14px 24px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin: 5px;
            font-family: Vazirmatn, Tahoma, sans-serif;
        }

        .btn-success {
            background: linear-gradient(to right, #4caf50, #66bb6a);
        }

        .btn-warning {
            background: linear-gradient(to right, #ff9800, #ffb74d);
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px 0;
        }

        .result-card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px;
            margin-bottom: 20px;
        }

        .result-card h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            border-bottom: 2px solid var(--primary-light);
            padding-bottom: 8px;
        }

        .field-result {
            margin-bottom: 25px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-right: 5px solid var(--primary-color);
        }

        .field-result h4 {
            color: var(--dark-color);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .field-status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-right: 10px;
            font-size: 0.9rem;
        }

        .status-success {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .status-error {
            background: #ffebee;
            color: #c62828;
        }

        .status-warning {
            background: #fff3e0;
            color: #ef6c00;
        }

        .subject-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 2fr;
            gap: 10px;
            padding: 10px;
            border-bottom: 1px solid #eee;
            align-items: center;
        }

        .subject-header {
            font-weight: bold;
            background: #e3f2fd;
            border-radius: 8px;
            margin-bottom: 5px;
        }

        .required-score {
            font-weight: bold;
            color: var(--primary-color);
        }

        .score-high {
            color: var(--success-color);
        }

        .score-low {
            color: var(--danger-color);
        }

        .print-area {
            direction: rtl;
        }

        .report-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(135deg, var(--primary-color), #1976d2);
            color: white;
            border-radius: 15px;
        }

        .report-header h2 {
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .student-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .student-details div {
            text-align: right;
            padding: 5px 10px;
            border-right: 3px solid rgba(255,255,255,0.5);
        }

        .student-details strong {
            display: block;
            font-size: 0.85rem;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .student-details span {
            font-size: 1.1rem;
            font-weight: bold;
        }

        .report-date {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-top: 15px;
        }

        .summary-box {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .summary-box h3 {
            color: #2e7d32;
            margin-bottom: 10px;
        }

        .info-note {
            background: #fff3e0;
            border-right: 4px solid #ff9800;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-size: 0.95rem;
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .no-print {
                display: none;
            }
            
            .print-area {
                display: block;
            }
            
            .container {
                max-width: 100%;
                padding: 20px;
            }
            
            .btn-group, .whatsapp-button, .textbook-button, .footer {
                display: none;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.5rem;
            }
            
            .subject-row {
                grid-template-columns: 1fr;
                gap: 5px;
            }
            
            .subject-header {
                display: none;
            }
            
            .btn {
                width: 100%;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
        }

        .whatsapp-button {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: #25D366;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 18px;
            border-radius: 50px;
            box-shadow: 0 4px 12px rgba(37, 211, 102, 0.4);
            text-decoration: none;
            font-weight: bold;
            z-index: 1000;
            transition: all 0.3s ease;
            height: 56px;
        }

        .textbook-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 18px;
            border-radius: 50px;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.4);
            text-decoration: none;
            font-weight: bold;
            z-index: 1000;
            transition: all 0.3s ease;
            height: 56px;
        }

        .footer {
            text-align: center;
            margin-top: 25px;
            color: #666;
            font-size: 0.9rem;
            padding: 10px;
            position: relative;
            z-index: 1;
        }

        .info-badge {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 0.95rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="no-print">
            <h1>ğŸ“‹ Ú©Ø§Ø±Ù†Ø§Ù…Ù‡ Ù‡Ø¯Ø§ÛŒØª ØªØ­ØµÛŒÙ„ÛŒ</h1>
            <p>Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù†Ù…Ø±Ø§Øª Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ù¾Ø§ÛŒÙ‡ Ù†Ù‡Ù… Ø¨Ø±Ø§ÛŒ Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù</p>
        </header>

        <!-- ÙØ±Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² -->
        <div class="student-info-form no-print">
            <h3>ğŸ‘¤ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label>Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ:</label>
                    <input type="text" id="studentName" placeholder="Ù…Ø«Ø§Ù„: Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ">
                </div>
                <div class="form-group">
                    <label>Ú©Ø¯ Ù…Ù„ÛŒ (Ø¯Ù‡ Ø±Ù‚Ù…):</label>
                    <input type="text" id="nationalCode" maxlength="10" pattern="\d{10}" placeholder="1234567890">
                    <div class="form-hint">Ú©Ø¯ Ù…Ù„ÛŒ Ø¨Ø§ÛŒØ¯ Û±Û° Ø±Ù‚Ù… Ø¨Ø§Ø´Ø¯</div>
                </div>
                <div class="form-group">
                    <label>Ù†Ø§Ù… Ù¾Ø¯Ø±:</label>
                    <input type="text" id="fatherName" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø­Ù…Ø¯">
                </div>
                <div class="form-group">
                    <label>Ù†Ø§Ù… Ù…Ø¯Ø±Ø³Ù‡:</label>
                    <input type="text" id="schoolName" placeholder="Ù…Ø«Ø§Ù„: Ø¯Ø¨ÛŒØ±Ø³ØªØ§Ù† Ù†Ù…ÙˆÙ†Ù‡ Ø¯ÙˆÙ„ØªÛŒ">
                </div>
            </div>
        </div>

        <div class="card no-print">
            <div class="card-header">
                <h3>âœï¸ ÙˆØ±ÙˆØ¯ Ù†Ù…Ø±Ø§Øª Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ù‡ÙØªÙ… Ùˆ Ù‡Ø´ØªÙ…</h3>
                <div>
                    <button class="btn btn-success" onclick="calculateAll()">Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡ Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§</button>
                    <button class="btn btn-warning" onclick="window.print()">ğŸ–¨ï¸ Ú†Ø§Ù¾ Ú©Ø§Ø±Ù†Ø§Ù…Ù‡</button>
                </div>
            </div>
            
            <div class="info-note">
                <strong>ğŸ“Œ Ù†Ú©ØªÙ‡ Ù…Ù‡Ù…:</strong> Ø¨Ø±Ø§ÛŒ Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø¹Ù„ÙˆÙ… Ø§Ù†Ø³Ø§Ù†ÛŒ Ùˆ Ø¹Ù„ÙˆÙ… Ùˆ Ù…Ø¹Ø§Ø±Ù Ø§Ø³Ù„Ø§Ù…ÛŒØŒ Ù†Ù…Ø±Ù‡ Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ Ø¨Ù‡ ØµÙˆØ±Øª Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø³Ù‡ Ù†Ù…Ø±Ù‡ (Ø§Ù…Ù„Ø§Ø¡ØŒ Ù†Ú¯Ø§Ø±Ø´ØŒ Ø§Ø¯Ø¨ÛŒØ§Øª) Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
            </div>
            
            <div class="table-container">
                <table id="scoresTable">
                    <thead>
                        <tr>
                            <th>Ø¯Ø±Ø³</th>
                            <th>Ù¾Ø§ÛŒÙ‡ Ù‡ÙØªÙ…</th>
                            <th>Ù¾Ø§ÛŒÙ‡ Ù‡Ø´ØªÙ…</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Ù‚Ø±Ø¢Ù†</td>
                            <td><input type="number" min="0" max="20" step="0.1" id="quran7" class="score-input"></td>
                            <td><input type="number" min="0" max="20" step="0.1" id="quran8" class="score-input"></td>
                        </tr>
                        <tr>
                            <td>Ù…Ø¹Ø§Ø±Ù (Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¢Ø³Ù…Ø§Ù†ÛŒ)</td>
                            <td><input type="number" min="0" max="20" step="0.1" id="dini7" class="score-input"></td>
                            <td><input type="number" min="0" max="20" step="0.1" id="dini8" class="score-input"></td>
                        </tr>
                        <tr>
                            <td colspan="3" style="background: #e8f5e9;">
                                <strong>Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ (Ø¨Ø±Ø§ÛŒ Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø§Ù†Ø³Ø§Ù†ÛŒ Ùˆ Ù…Ø¹Ø§Ø±Ù)</strong>
                            </td>
                        </tr>
                        <tr>
                            <td>â¡ï¸ Ø§Ù…Ù„Ø§Ø¡</td>
                            <td><input type="number" min="0" max="20" step="0.1" id="imla7" class="score-input"></td>
                            <td><input type="number" min="0" max="20" step="0.1" id="imla8" class="score-input"></td>
                        </tr>
                        <tr>
                            <td>â¡ï¸ Ù†Ú¯Ø§Ø±Ø´</td>
                            <td><input type="number" min="0" max="20" step="0.1" id="negaresh7" class="score-input"></td>
                            <td><input type="number" min="0" max="20" step="0.1" id="negaresh8" class="score-input"></td>
                        </tr>
                        <tr>
                            <td>â¡ï¸ Ø§Ø¯Ø¨ÛŒØ§Øª</td>
                            <td><input type="number" min="0" max="20" step="0.1" id="adabiat7" class="score-input"></td>
                            <td><input type="number" min="0" max="20" step="0.1" id="adabiat8" class="score-input"></td>
                        </tr>
                        <tr>
                            <td>Ø¹Ø±Ø¨ÛŒ</td>
                            <td><input type="number" min="0" max="20" step="0.1" id="arabi7" class="score-input"></td>
                            <td><input type="number" min="0" max="20" step="0.1" id="arabi8" class="score-input"></td>
                        </tr>
                        <tr>
                            <td>Ø±ÛŒØ§Ø¶ÛŒ</td>
                            <td><input type="number" min="0" max="20" step="0.1" id="riazi7" class="score-input"></td>
                            <td><input type="number" min="0" max="20" step="0.1" id="riazi8" class="score-input"></td>
                        </tr>
                        <tr>
                            <td>Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ</td>
                            <td><input type="number" min="0" max="20" step="0.1" id="oloom7" class="score-input"></td>
                            <td><input type="number" min="0" max="20" step="0.1" id="oloom8" class="score-input"></td>
                        </tr>
                        <tr>
                            <td>Ù…Ø·Ø§Ù„Ø¹Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ</td>
                            <td><input type="number" min="0" max="20" step="0.1" id="ejtemaei7" class="score-input"></td>
                            <td><input type="number" min="0" max="20" step="0.1" id="ejtemaei8" class="score-input"></td>
                        </tr>
                        <tr>
                            <td>Ú©Ø§Ø± Ùˆ ÙÙ†Ø§ÙˆØ±ÛŒ</td>
                            <td><input type="number" min="0" max="20" step="0.1" id="kar7" class="score-input"></td>
                            <td><input type="number" min="0" max="20" step="0.1" id="kar8" class="score-input"></td>
                        </tr>
                        <tr>
                            <td>ÙØ±Ù‡Ù†Ú¯ Ùˆ Ù‡Ù†Ø±</td>
                            <td><input type="number" min="0" max="20" step="0.1" id="honar7" class="score-input"></td>
                            <td><input type="number" min="0" max="20" step="0.1" id="honar8" class="score-input"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="info-badge">
                <strong>ğŸ“Œ Ø±Ø§Ù‡Ù†Ù…Ø§:</strong> Ù†Ù…Ø±Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ø± Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ù‡ÙØªÙ… Ùˆ Ù‡Ø´ØªÙ… ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯. Ø³ÛŒØ³ØªÙ… Ø¨Ø± Ø§Ø³Ø§Ø³ Ø§ÛŒÙ† Ù†Ù…Ø±Ø§ØªØŒ Ø­Ø¯Ø§Ù‚Ù„ Ù†Ù…Ø±Ù‡ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø´Ù…Ø§ Ø¯Ø± Ù¾Ø§ÛŒÙ‡ Ù†Ù‡Ù… Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø±Ø´ØªÙ‡ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
            </div>
        </div>

        <!-- Ú©Ø§Ø±Ù†Ø§Ù…Ù‡ Ù†ØªØ§ÛŒØ¬ -->
        <div class="print-area" id="reportArea" style="display: none;">
            <div class="report-header">
                <h2>Ú©Ø§Ø±Ù†Ø§Ù…Ù‡ Ù‡Ø¯Ø§ÛŒØª ØªØ­ØµÛŒÙ„ÛŒ</h2>
                
                <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¯Ø± Ø³Ø±Ø¨Ø±Ú¯ Ú©Ø§Ø±Ù†Ø§Ù…Ù‡ -->
                <div class="student-details" id="reportStudentInfo">
                    <div>
                        <strong>Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</strong>
                        <span id="reportName">_________________</span>
                    </div>
                    <div>
                        <strong>Ú©Ø¯ Ù…Ù„ÛŒ</strong>
                        <span id="reportNationalCode">_________________</span>
                    </div>
                    <div>
                        <strong>Ù†Ø§Ù… Ù¾Ø¯Ø±</strong>
                        <span id="reportFatherName">_________________</span>
                    </div>
                    <div>
                        <strong>Ù†Ø§Ù… Ù…Ø¯Ø±Ø³Ù‡</strong>
                        <span id="reportSchoolName">_________________</span>
                    </div>
                </div>
                
                <div class="report-date" id="reportDate"></div>
            </div>
            
            <div class="summary-box" id="summaryBox"></div>
            
            <div id="fieldsResults"></div>
        </div>

        <div class="footer no-print">
            Ø·Ø±Ø§Ø­ÛŒ Ùˆ ØªÙˆØ³Ø¹Ù‡ ØªÙˆØ³Ø·: Ø§Ø­Ù…Ø¯ Ø¹Ù„ÛŒ Ù¾Ø±Ø³Øª
        </div>
    </div>

    <a href="https://wa.me/989107628500" target="_blank" class="whatsapp-button no-print" title="Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø§ Ø§Ø² Ø·Ø±ÛŒÙ‚ ÙˆØ§ØªØ³Ø§Ù¾">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
            <path d="M12.044 2C6.491 2 2 6.484 2 12.028c0 1.963.6 3.788 1.624 5.302L2 22l4.68-1.232a10.05 10.05 0 0 0 4.82 1.228c5.553 0 10.044-4.484 10.044-10.028S17.597 2 12.044 2z"/>
        </svg>
        Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø§
    </a>

    <a href="http://chap.sch.ir/" target="_blank" class="textbook-button no-print" title="Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ú©ØªØ§Ø¨ Ù‡Ø§ÛŒ Ø¯Ø±Ø³ÛŒ">
        <span>ğŸ“š</span>
        Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ú©ØªØ¨ Ø¯Ø±Ø³ÛŒ
    </a>

    <script>
        // ØªØ¹Ø±ÛŒÙ Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§ Ùˆ Ø¯Ø±ÙˆØ³ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²
        const fields = {
            human: {
                name: "Ø¹Ù„ÙˆÙ… Ø§Ù†Ø³Ø§Ù†ÛŒ",
                subjects: {
                    "Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ": 14,
                    "Ù…Ø·Ø§Ù„Ø¹Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ": 13,
                    "Ø¹Ø±Ø¨ÛŒ": 12
                }
            },
            islamic: {
                name: "Ø¹Ù„ÙˆÙ… Ùˆ Ù…Ø¹Ø§Ø±Ù Ø§Ø³Ù„Ø§Ù…ÛŒ",
                subjects: {
                    "Ù…Ø¹Ø§Ø±Ù (Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¢Ø³Ù…Ø§Ù†ÛŒ)": 14,
                    "Ø¹Ø±Ø¨ÛŒ": 14,
                    "Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ": 14
                }
            },
            experimental: {
                name: "Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ",
                subjects: {
                    "Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ": 14,
                    "Ø±ÛŒØ§Ø¶ÛŒ": 13
                }
            },
            mathphy: {
                name: "Ø±ÛŒØ§Ø¶ÛŒ ÙÛŒØ²ÛŒÚ©",
                subjects: {
                    "Ø±ÛŒØ§Ø¶ÛŒ": 14,
                    "Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ": 13
                }
            },
            karDaneshSanat: {
                name: "Ú©Ø§Ø±Ø¯Ø§Ù†Ø´ Ùˆ ÙÙ†ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ - ØµÙ†Ø¹Øª",
                subjects: {
                    "Ø±ÛŒØ§Ø¶ÛŒ": 10,
                    "Ú©Ø§Ø± Ùˆ ÙÙ†Ø§ÙˆØ±ÛŒ": 12
                }
            },
            karDaneshKhedmat: {
                name: "Ú©Ø§Ø±Ø¯Ø§Ù†Ø´ Ùˆ ÙÙ†ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ - Ø®Ø¯Ù…Ø§Øª",
                subjects: {
                    "Ú©Ø§Ø± Ùˆ ÙÙ†Ø§ÙˆØ±ÛŒ": 10,
                    "ÙØ±Ù‡Ù†Ú¯ Ùˆ Ù‡Ù†Ø±": 10
                }
            },
            karDaneshHonar: {
                name: "Ú©Ø§Ø±Ø¯Ø§Ù†Ø´ Ùˆ ÙÙ†ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ - Ù‡Ù†Ø±",
                subjects: {
                    "Ú©Ø§Ø± Ùˆ ÙÙ†Ø§ÙˆØ±ÛŒ": 10,
                    "ÙØ±Ù‡Ù†Ú¯ Ùˆ Ù‡Ù†Ø±": 12
                }
            },
            karDaneshKeshavarzi: {
                name: "Ú©Ø§Ø±Ø¯Ø§Ù†Ø´ Ùˆ ÙÙ†ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ - Ú©Ø´Ø§ÙˆØ±Ø²ÛŒ",
                subjects: {}
            }
        };

        function getScore(id) {
            const input = document.getElementById(id);
            return input ? parseFloat(input.value) || 0 : 0;
        }

        // Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
        function getStudentInfo() {
            return {
                name: document.getElementById('studentName')?.value || '_________________',
                nationalCode: document.getElementById('nationalCode')?.value || '_________________',
                fatherName: document.getElementById('fatherName')?.value || '_________________',
                schoolName: document.getElementById('schoolName')?.value || '_________________'
            };
        }

        // Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² Ø¯Ø± Ú©Ø§Ø±Ù†Ø§Ù…Ù‡
        function displayStudentInfo() {
            const info = getStudentInfo();
            document.getElementById('reportName').textContent = info.name || '_________________';
            document.getElementById('reportNationalCode').textContent = info.nationalCode || '_________________';
            document.getElementById('reportFatherName').textContent = info.fatherName || '_________________';
            document.getElementById('reportSchoolName').textContent = info.schoolName || '_________________';
        }

        // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù†Ù…Ø±Ù‡ Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ (Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø§Ù…Ù„Ø§Ø¡ØŒ Ù†Ú¯Ø§Ø±Ø´ØŒ Ø§Ø¯Ø¨ÛŒØ§Øª)
        function getLiteratureScore(base) {
            const imla = getScore(`imla${base}`);
            const negaresh = getScore(`negaresh${base}`);
            const adabiat = getScore(`adabiat${base}`);
            
            // Ø§Ú¯Ø± Ù‡Ø± Ø³Ù‡ ØµÙØ± Ø¨Ø§Ø´Ù†Ø¯ØŒ ØµÙØ± Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø§Ù†ÛŒÙ…
            if (imla === 0 && negaresh === 0 && adabiat === 0) return 0;
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ†
            return (imla + negaresh + adabiat) / 3;
        }

        function getAllScores() {
            return {
                "Ù‚Ø±Ø¢Ù†": { 
                    n7: getScore('quran7'), 
                    n8: getScore('quran8') 
                },
                "Ù…Ø¹Ø§Ø±Ù (Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¢Ø³Ù…Ø§Ù†ÛŒ)": { 
                    n7: getScore('dini7'), 
                    n8: getScore('dini8') 
                },
                "Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ": { 
                    n7: getLiteratureScore('7'), 
                    n8: getLiteratureScore('8'),
                    details: {
                        imla7: getScore('imla7'),
                        negaresh7: getScore('negaresh7'),
                        adabiat7: getScore('adabiat7'),
                        imla8: getScore('imla8'),
                        negaresh8: getScore('negaresh8'),
                        adabiat8: getScore('adabiat8')
                    }
                },
                "Ø¹Ø±Ø¨ÛŒ": { 
                    n7: getScore('arabi7'), 
                    n8: getScore('arabi8') 
                },
                "Ø±ÛŒØ§Ø¶ÛŒ": { 
                    n7: getScore('riazi7'), 
                    n8: getScore('riazi8') 
                },
                "Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ": { 
                    n7: getScore('oloom7'), 
                    n8: getScore('oloom8') 
                },
                "Ù…Ø·Ø§Ù„Ø¹Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ": { 
                    n7: getScore('ejtemaei7'), 
                    n8: getScore('ejtemaei8') 
                },
                "Ú©Ø§Ø± Ùˆ ÙÙ†Ø§ÙˆØ±ÛŒ": { 
                    n7: getScore('kar7'), 
                    n8: getScore('kar8') 
                },
                "ÙØ±Ù‡Ù†Ú¯ Ùˆ Ù‡Ù†Ø±": { 
                    n7: getScore('honar7'), 
                    n8: getScore('honar8') 
                }
            };
        }

        function calculateRequiredScore(n7, n8, minAverage) {
            // ÙØ±Ù…ÙˆÙ„: (Ù†Ù…Ø±Ù‡ Ù‡ÙØªÙ… + Ù†Ù…Ø±Ù‡ Ù‡Ø´ØªÙ… + 3Ã—Ù†Ù…Ø±Ù‡ Ù†Ù‡Ù…) / 5 = Ø­Ø¯Ø§Ù‚Ù„ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ†
            // Ù†Ù…Ø±Ù‡ Ù†Ù‡Ù… = (5Ã—Ø­Ø¯Ø§Ù‚Ù„ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† - Ù†Ù…Ø±Ù‡ Ù‡ÙØªÙ… - Ù†Ù…Ø±Ù‡ Ù‡Ø´ØªÙ…) / 3
            return ((minAverage * 5) - n7 - n8) / 3;
        }

        function calculateAll() {
            const scores = getAllScores();
            const results = {};
            let allResults = [];

            // Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²
            displayStudentInfo();

            for (const [fieldKey, field] of Object.entries(fields)) {
                if (fieldKey === "karDaneshKeshavarzi") {
                    results[fieldKey] = {
                        name: field.name,
                        status: "Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù†Ù…Ø±Ù‡",
                        details: []
                    };
                    continue;
                }

                let fieldResult = {
                    name: field.name,
                    details: [],
                    hasImpossible: false
                };

                for (const [subject, minAverage] of Object.entries(field.subjects)) {
                    const subjectScores = scores[subject];
                    
                    if (!subjectScores) {
                        fieldResult.details.push({
                            subject: subject,
                            required: "Ù†Ø§Ù…Ø´Ø®Øµ",
                            status: "warning",
                            message: "Ø§ÛŒÙ† Ø¯Ø±Ø³ Ø¯Ø± Ù†Ù…Ø±Ø§Øª Ø´Ù…Ø§ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª"
                        });
                        continue;
                    }

                    const n7 = subjectScores.n7;
                    const n8 = subjectScores.n8;
                    
                    const required = calculateRequiredScore(n7, n8, minAverage);
                    
                    let status = "";
                    let message = "";
                    
                    if (required > 20) {
                        status = "impossible";
                        message = `âŒ ØºÛŒØ±Ù…Ù…Ú©Ù† (Ø­ØªÛŒ Ø¨Ø§ Ù†Ù…Ø±Ù‡ Û²Û°)`;
                        fieldResult.hasImpossible = true;
                    } else if (required <= 0) {
                        status = "passed";
                        message = `âœ… Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù†Ù…Ø±Ù‡ Ù†Ù‡Ù…`;
                    } else {
                        status = "required";
                        message = `ğŸ¯ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù†Ù…Ø±Ù‡ ${required.toFixed(2)}`;
                    }

                    // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¬Ø²Ø¦ÛŒØ§Øª Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ
                    let literatureDetail = "";
                    if (subject === "Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ" && subjectScores.details) {
                        literatureDetail = `<br><small>(Ø§Ù…Ù„Ø§Ø¡: ${subjectScores.details.imla7.toFixed(2)}ØŒ Ù†Ú¯Ø§Ø±Ø´: ${subjectScores.details.negaresh7.toFixed(2)}ØŒ Ø§Ø¯Ø¨ÛŒØ§Øª: ${subjectScores.details.adabiat7.toFixed(2)})</small>`;
                    }

                    fieldResult.details.push({
                        subject: subject,
                        n7: n7,
                        n8: n8,
                        minAverage: minAverage,
                        required: required,
                        status: status,
                        message: message,
                        literatureDetail: literatureDetail
                    });
                }

                results[fieldKey] = fieldResult;
            }

            displayResults(results, scores);
        }

        function displayResults(results, scores) {
            const reportArea = document.getElementById('reportArea');
            const fieldsResults = document.getElementById('fieldsResults');
            const summaryBox = document.getElementById('summaryBox');
            const reportDate = document.getElementById('reportDate');
            
            // ØªÙ†Ø¸ÛŒÙ… ØªØ§Ø±ÛŒØ®
            const now = new Date();
            reportDate.textContent = `ØªØ§Ø±ÛŒØ® Ú¯Ø²Ø§Ø±Ø´: ${now.toLocaleDateString('fa-IR')}`;
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ú©Ù„
            let totalScore = 0;
            let count = 0;
            for (const [subject, score] of Object.entries(scores)) {
                if (subject === "Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ") {
                    totalScore += score.n7 + score.n8;
                    count += 2;
                } else {
                    totalScore += score.n7 + score.n8;
                    count += 2;
                }
            }
            const average = count > 0 ? (totalScore / count).toFixed(2) : 0;
            
            // Ù†Ù…Ø§ÛŒØ´ Ø¬Ø²Ø¦ÛŒØ§Øª Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ
            const litDetails = scores["Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ"].details;
            const litAverage7 = ((litDetails.imla7 + litDetails.negaresh7 + litDetails.adabiat7) / 3).toFixed(2);
            const litAverage8 = ((litDetails.imla8 + litDetails.negaresh8 + litDetails.adabiat8) / 3).toFixed(2);
            
            summaryBox.innerHTML = `
                <h3>ğŸ“Š Ø®Ù„Ø§ØµÙ‡ ÙˆØ¶Ø¹ÛŒØª ØªØ­ØµÛŒÙ„ÛŒ</h3>
                <p>Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù†Ù…Ø±Ø§Øª Ù¾Ø§ÛŒÙ‡ Ù‡ÙØªÙ… Ùˆ Ù‡Ø´ØªÙ…: ${average}</p>
                <p>ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±ÙˆØ³: 9 Ø¯Ø±Ø³</p>
                <hr style="margin: 10px 0;">
                <p style="font-size: 0.9rem;">
                    <strong>Ù†Ù…Ø±Ù‡ Ø§Ø¯Ø¨ÛŒØ§Øª ÙØ§Ø±Ø³ÛŒ:</strong><br>
                    Ù¾Ø§ÛŒÙ‡ Ù‡ÙØªÙ…: Ø§Ù…Ù„Ø§Ø¡ ${litDetails.imla7.toFixed(2)}ØŒ Ù†Ú¯Ø§Ø±Ø´ ${litDetails.negaresh7.toFixed(2)}ØŒ Ø§Ø¯Ø¨ÛŒØ§Øª ${litDetails.adabiat7.toFixed(2)}<br>
                    Ù…ÛŒØ§Ù†Ú¯ÛŒÙ†: ${litAverage7}<br>
                    Ù¾Ø§ÛŒÙ‡ Ù‡Ø´ØªÙ…: Ø§Ù…Ù„Ø§Ø¡ ${litDetails.imla8.toFixed(2)}ØŒ Ù†Ú¯Ø§Ø±Ø´ ${litDetails.negaresh8.toFixed(2)}ØŒ Ø§Ø¯Ø¨ÛŒØ§Øª ${litDetails.adabiat8.toFixed(2)}<br>
                    Ù…ÛŒØ§Ù†Ú¯ÛŒÙ†: ${litAverage8}
                </p>
            `;
            
            let html = '';
            
            for (const [fieldKey, result] of Object.entries(results)) {
                let statusClass = 'status-warning';
                let statusText = '';
                
                if (result.hasImpossible) {
                    statusClass = 'status-error';
                    statusText = 'âš ï¸ Ø¨Ø±Ø®ÛŒ Ø¯Ø±ÙˆØ³ ØºÛŒØ±Ù…Ù…Ú©Ù†';
                }
                
                html += `
                    <div class="field-result">
                        <h4>
                            ${result.name}
                            ${statusText ? `<span class="field-status ${statusClass}">${statusText}</span>` : ''}
                        </h4>
                `;
                
                if (fieldKey === "karDaneshKeshavarzi") {
                    html += `<p>Ø§ÛŒÙ† Ø±Ø´ØªÙ‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø­Ø¯Ù†ØµØ§Ø¨ Ø®Ø§ØµÛŒ Ù†Ø¯Ø§Ø±Ø¯.</p>`;
                } else {
                    html += `
                        <div class="subject-row subject-header">
                            <div>Ø¯Ø±Ø³</div>
                            <div>Ù†Ù…Ø±Ù‡ Ù‡ÙØªÙ…</div>
                            <div>Ù†Ù…Ø±Ù‡ Ù‡Ø´ØªÙ…</div>
                            <div>Ø­Ø¯Ù†ØµØ§Ø¨</div>
                            <div>Ù†Ù…Ø±Ù‡ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø¯Ø± Ù†Ù‡Ù…</div>
                        </div>
                    `;
                    
                    result.details.forEach(detail => {
                        let requiredClass = '';
                        let requiredDisplay = '';
                        
                        if (detail.status === 'impossible') {
                            requiredClass = 'score-low';
                            requiredDisplay = detail.message;
                        } else if (detail.status === 'passed') {
                            requiredClass = 'score-high';
                            requiredDisplay = detail.message;
                        } else {
                            requiredDisplay = detail.message;
                        }
                        
                        html += `
                            <div class="subject-row">
                                <div>
                                    <strong>${detail.subject}</strong>
                                    ${detail.literatureDetail || ''}
                                </div>
                                <div>${detail.n7.toFixed(2)}</div>
                                <div>${detail.n8.toFixed(2)}</div>
                                <div>${detail.minAverage}</div>
                                <div class="${requiredClass}">${requiredDisplay}</div>
                            </div>
                        `;
                    });
                }
                
                html += `</div>`;
            }
            
            fieldsResults.innerHTML = html;
            reportArea.style.display = 'block';
            
            // Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ù‡ Ú©Ø§Ø±Ù†Ø§Ù…Ù‡
            reportArea.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>